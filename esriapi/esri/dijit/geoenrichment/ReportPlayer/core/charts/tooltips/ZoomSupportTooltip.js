// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.30/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/tooltips/ZoomSupportTooltip","dojo/_base/declare dojo/_base/lang dojo/sniff dojo/dom-geometry dojox/charting/action2d/Tooltip dojox/lang/functional dojox/gfx/matrix esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/TooltipUtil".split(" "),function(k,n,p,q,r,f,t,u,v){var g=Math.PI/4,w=Math.PI/2,m={_tooltips:[],show:function(b,f,g,l,a){this.hide();this._tooltips.push(v.showTooltipForNode(l,b,{position:g,notRestricted:!0,
classes:a&&[a]}))},hide:function(){this._tooltips.forEach(function(b){b&&b.destroy()});this._tooltips.length=0}};return k(r,{tooltipClass:null,process:function(b){function h(){n.mixin(a,k())}function k(){var a=b.shape.rawNode.getBoundingClientRect(),c=q.position(l.chart.node,!0);return{x:a.left-c.x,y:a.top-c.y,w:a.width,h:a.height}}var l=this;if("onplotreset"===b.type||"onmouseout"===b.type)m.hide(this.aroundRect),this.aroundRect=null,"onplotreset"===b.type&&delete this.angles;else if(b.shape&&"onmouseover"===
b.type){var a={type:"rect"},e=["after-centered","before-centered"];if(this._needSetRectFromShape())h();else{switch(b.element){case "marker":case "circle":case "spider_circle":case "spider_plot":case "candlestick":h();break;case "column":e=["above-centered","below-centered","after-centered","before-centered"];case "bar":h();break;default:if(!this.angles){var c="number"===typeof b.run.data[0]?f.map(b.run.data,"x ? Math.max(x, 0) : 0"):f.map(b.run.data,"x ? Math.max(x.y, 0) : 0");this.angles=f.map(f.scanl(c,
"+",0),"* 2 * Math.PI / this",f.foldl(c,"+",0))}var c=t._degToRad(b.plot.opt.startAngle),d=(this.angles[b.index]+this.angles[b.index+1])/2+c;h();c&&(0>d||d>2*Math.PI)&&(d=Math.abs(2*Math.PI-Math.abs(d)));d<g||(d<w+g?e=["below-centered","above-centered"]:d<Math.PI+g?e=["before-centered","after-centered"]:d<2*Math.PI-g&&(e=["above-centered","below-centered"]))}p("dojo-bidi")&&this._recheckPosition(b,a,e)}u.isMobileDevice()&&(e=["above-centered","below-centered"]);c=this.chart.getCoords();a.x+=c.x;a.y+=
c.y;a.x=Math.round(a.x);a.y=Math.round(a.y);a.w=Math.ceil(a.w);a.h=Math.ceil(a.h);this.aroundRect=a;(c=this.text(b,this.plot))&&m.show(this._format(c),this.aroundRect,e,b.shape.rawNode,this.tooltipClass)}},_needSetRectFromShape:function(){return!1}})});