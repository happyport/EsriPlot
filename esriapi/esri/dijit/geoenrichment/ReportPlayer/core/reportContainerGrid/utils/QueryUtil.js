// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.30/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/reportContainerGrid/utils/QueryUtil",["dojo/dom-geometry","../../supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil"],function(h,k){var g={getLayoutCells:function(b,a){a=a||{};var c=a.sectionFuncName,d=a.floatingCells,e=a.topFirst,f=[];(a.visibleOnly?b.getShownGrids():b.getGrids()).forEach(function(a){(a=a.getFieldCells({floatingCells:d,topFirst:e}))&&(f=f.concat(a))});return c?f.filter(function(a){return!c||a&&a.content&&a.content[c]}):
f},findFirstEmptyLayoutCell:function(b){return function(){var a;g.getLayoutCells(b,{sectionFuncName:"isEmpty"}).some(function(c){if(c.content.isEmpty())return a=c,!0});return a}()},getFloatingTables:function(b,a){var c=[];("number"===typeof a?[b.getGrids()[a]]:b.getGrids()).forEach(function(a){a.foregroundFloatingTablesSection&&(c=c.concat(a.foregroundFloatingTablesSection.getTables()));a.backgroundFloatingTablesSection&&(c=c.concat(a.backgroundFloatingTablesSection.getTables()))});return c},getFocusedLayoutCell:function(b){var a=
[];b.getGrids().forEach(function(c){(c=c.getSelectedCells())&&(a=a.concat(c))});return a[0]},hasFocusedChild:function(b){return b.getGrids().some(function(a){return(a=a&&a.getSelectedCells())&&!!a.length})},collectFieldInfosJson:function(b){var a=[];k.processTemplateFieldInfos(b.toJson(),function(c){a.push(c)});return a},getSectionIndex:function(b,a){var c=0,d;b.getGrids().some(function(b){return b.getFieldCells().some(function(b){if(b===a)return d=!0;c++})});return d&&c},getLayoutCellBySectionIndex:function(b,
a){var c=0,d;b.getGrids().some(function(b){return b.getFieldCells().some(function(b){if(c===a)return d=b,!0;c++})});return d},screenToPageCoords:function(b,a,c,d){var e=b.getGrids()[b.getCurrentViewedPageIndex()];if(!e)return null;e=h.position(e.domNode);a={x:a-e.x,y:c-e.y};d&&!d.returnInScreenCoordinates&&(b=b.getZoomInfo().scale,a.x/=b,a.y/=b);return a}};return g});