// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.30/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/dataProvider/commands/createHTML/HTMLToSVGBuilder","dojo/_base/lang dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/when ./CSSFilesLoader ./HTMLPageBuilder esri/dijit/geoenrichment/utils/htmlToSvg/HTMLtoSVGConverter esri/dijit/geoenrichment/utils/htmlToSvg/supportClasses/imageUtils/ImageOptimizer esri/dijit/geoenrichment/utils/async/AsyncQueue esri/dijit/geoenrichment/utils/DelayUtil".split(" "),function(m,n,b,g,p,q,r,t,u,v){var f={htmlToSvg:function(a,
d,c,e){return this._htmlToSvg(a,d,c,e)},htmlToSvgInHtml:function(a,d,c,e,b){return g(this._htmlToSvg(a,c,e,b),function(a){return g(p.loadCssFontFiles(),function(c){return q.composeHtmlStringFromParts({reportTitle:d,contentString:a.join(""),cssFiles:c})})})},_htmlToSvg:function(a,d,c,e){var g=this,h=b.create("div",{"class":"esriGEBehindScreen"},document.body);h.innerHTML=a;for(var k=[];h.children.length;)a=b.create("div",{"class":"esriGEBehindScreen"},document.body),b.place(h.children[0],a),k.push(a);
var f=new u,l=[];k.map(function(a,c){f.add(function(){return g._nodeToSvg(a,{fitParams:d}).then(function(a){l.push(a);e(c,k.length);return v.delay(50)})})});return f.getPromise().then(function(){b.destroy(h);k.forEach(function(a){b.destroy(a)});return t.optimizeSize(l,c)})},_NODES_TO_CLIP:["shapeContainer_svgContainerShowAsBar","imageNavigator_imagePaginationRoot","infographicPageStack_infographicSectionNode_stackNode","infographicPageStack_infographicSectionNode_background"],_nodeToSvg:function(a,
b){return r.htmlToSvg(a,m.mixin({iterationsPerScript:100,clipFunc:function(a){return a&&f._NODES_TO_CLIP.some(function(b){return n.contains(a,b)})}},b))}};return f});